/** MIT License
* 
* Copyright (c) 2011 Ludovic CLUBER 
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*
* http://type6js.lcluber.com
*/

var TYPE6={Revision:"0.3.1"};TYPE6.MathUtils={round:function(t,i){return i=Math.pow(10,i),Math.round(t*i)/i},floor:function(t,i){return i=Math.pow(10,i),Math.floor(t*i)/i},ceil:function(t,i){return i=Math.pow(10,i),Math.ceil(t*i)/i},trunc:function(t,i){return i=Math.pow(10,i),Math.trunc(t*i)/i},roundToNearest:function(t,i){return Math.round(t/i)*i},isEven:function(t){return!(1&t)},isOdd:function(t){return 1&t},mix:function(t,i,e){return(1-e)*t+e*i},getSign:function(t){return t?t<0?-1:1:0},getOppositeSign:function(t){return-t},clamp:function(t,i,e){return Math.min(Math.max(t,i),e)},normalize:function(t,i,e){return(t-i)/(e-i)},lerp:function(t,i,e){return(e-i)*t+i},map:function(t,i,e,n,s){return this.lerp(this.normalize(t,i,e),n,s)}},TYPE6.Random={float:function(t,i){return t+Math.random()*(i-t)},integer:function(t,i){return Math.floor(t+Math.random()*(i-t+1))},distribution:function(t,i,e){for(var n=0,s=0;s<e;s++)n+=this.float(t,i);return n/e},pick:function(t,i){return Math.random()<.5?t:i}},TYPE6.Bezier={quadratic:function(t,i,e,n,s,r,o,h){return o*t+h*i+s*e},cubic:function(t,i,e,n,s,r,o){return Math.pow(o,3)*t+3*Math.pow(o,2)*s*i+3*o*r*e+r*s*n}},TYPE6.Vector2D={x:0,y:0,create:function(t,i){var e=Object.create(this);return e.setX(t),e.setY(i),e},createFromArray:function(t){var i=Object.create(this);return i.setX(t[0]),i.setY(t[1]),i},toArray:function(){return[this.x,this.y]},toString:function(){return"("+this.x+";"+this.y+")"},setX:function(t){return this.x=this.valueValidation(t),this.x},getX:function(){return this.x},setY:function(t){return this.y=this.valueValidation(t),this.y},getY:function(){return this.y},set:function(t,i){return!!this.hasOwnProperty(t)&&(this[t]=this.valueValidation(i),this[t])},get:function(t){return!!this.hasOwnProperty(t)&&this[t]},setXY:function(t,i){this.x=this.valueValidation(t),this.y=this.valueValidation(i)},setToOrigin:function(){this.x=0,this.y=0},setXToOrigin:function(){this.x=0},setYToOrigin:function(){this.y=0},setAngle:function(t){if(this.valueValidation(t)){var i=this.getMagnitude();return this.x=TYPE6.Trigonometry.cosinus(t)*i,this.y=TYPE6.Trigonometry.sinus(t)*i,!0}return!1},getAngle:function(){return Math.atan2(this.y,this.x)},setMagnitude:function(t){if(this.valueValidation(t)){var i=this.getAngle();return this.x=TYPE6.Trigonometry.cosinus(i)*t,this.y=TYPE6.Trigonometry.sinus(i)*t,!0}return!1},getMagnitude:function(){return Math.sqrt(this.getSquaredMagnitude())},getSquaredMagnitude:function(){return this.x*this.x+this.y*this.y},getDistance:function(t){this.subtractFrom(t);var i=this.getMagnitude();return this.addTo(t),i},getSquaredDistance:function(t){this.subtractFrom(t);var i=this.getSquaredMagnitude();return this.addTo(t),i},copy:function(){return this.create(this.getX(),this.getY())},add:function(t){return this.create(this.x+t.getX(),this.y+t.getY())},addX:function(t){return this.create(this.x+t,this.y)},addY:function(t){return this.create(this.x,this.y+t)},addScalar:function(t){return this.create(this.x+t,this.y+t)},addScaledVector:function(t,i){return this.create(this.x+t.getX()*i,this.y+t.getY()*i)},subtract:function(t){return this.create(this.x-t.getX(),this.y-t.getY())},subtractScalar:function(t){return this.create(this.x-t,this.y-t)},subtractScaledVector:function(t,i){return this.create(this.x-t.getX()*i,this.y-t.getY()*i)},scale:function(t){return this.create(this.x*t,this.y*t)},multiply:function(t){return this.create(this.x*t.getX(),this.y*t.getY())},divide:function(t){return this.create(this.x/t.getX(),this.y/t.getY())},halve:function(){return this.create(.5*this.x,.5*this.y)},normalize:function(){var t=this.getMagnitude();if(t)return this.scale(1/t)},absolute:function(){return this.create(Math.abs(this.x),Math.abs(this.y))},opposite:function(){return this.create(-this.x,-this.y)},oppositeX:function(){return this.create(-this.x,this.y)},oppositeY:function(){return this.create(this.x,-this.y)},clamp:function(t){return this.create(TYPE6.MathUtils.clamp(this.x,t.topLeftCorner.getX(),t.bottomRightCorner.getX()),TYPE6.MathUtils.clamp(this.y,t.topLeftCorner.getY(),t.bottomRightCorner.getY()))},lerp:function(t,i,e){return this.create(TYPE6.MathUtils.lerp(t,i.getX(),e.getX()),TYPE6.MathUtils.lerp(t,i.getY(),e.getY()))},quadraticBezier:function(t,i,e,n){var s=n*n,r=1-n,o=Math.pow(r,2),h=2*r*n;return this.create(TYPE6.Bezier.quadratic(t.getX(),i.getX(),e.getX(),n,s,r,o,h),TYPE6.Bezier.quadratic(t.getY(),i.getY(),e.getY(),n,s,r,o,h))},cubicBezier:function(t,i,e,n,s){var r=s*s,o=1-s;return this.create(TYPE6.Bezier.cubic(t.getX(),i.getX(),e.getX(),n.getX(),s,r,o),TYPE6.Bezier.cubic(t.getY(),i.getY(),e.getY(),n.getY(),s,r,o))},quadraticBezierTo:function(t,i,e,n){var s=n*n,r=1-n,o=Math.pow(r,2),h=2*r*n;this.x=TYPE6.Bezier.quadratic(t.getX(),i.getX(),e.getX(),n,s,r,o,h),this.y=TYPE6.Bezier.quadratic(t.getY(),i.getY(),e.getY(),n,s,r,o,h)},cubicBezierTo:function(t,i,e,n,s){var r=s*s,o=1-s;this.x=TYPE6.Bezier.cubic(t.getX(),i.getX(),e.getX(),n.getX(),s,r,o),this.y=TYPE6.Bezier.cubic(t.getY(),i.getY(),e.getY(),n.getY(),s,r,o)},copyTo:function(t){this.x=t.getX(),this.y=t.getY()},addTo:function(t){return this.x+=t.getX(),this.y+=t.getY(),this},addToX:function(t){return this.x+=t,this},addToY:function(t){return this.y+=t,this},addScalarTo:function(t){return this.x+=t,this.y+=t,this},addScaledVectorTo:function(t,i){return this.x+=t.getX()*i,this.y+=t.getY()*i,this},copyScaledVectorTo:function(t,i){return this.x=t.getX()*i,this.y=t.getY()*i,this},subtractFrom:function(t){return this.x-=t.getX(),this.y-=t.getY(),this},subtractFromX:function(t){return this.x-=t,this},subtractFromY:function(t){return this.y-=t,this},copySubtractFromTo:function(t,i){return this.x=t.getX()-i.getX(),this.y=t.getY()-i.getY(),this},subtractScalarFrom:function(t){return this.x-=t,this.y-=t,this},subtractScaledVectorFrom:function(t,i){return this.x-=t.getX()*i,this.y-=t.getY()*i,this},scaleBy:function(t){return this.x*=t,this.y*=t,this},multiplyBy:function(t){return this.x*=t.getX(),this.y*=t.getY(),this},multiplyScaledVectorBy:function(t,i){return this.x*=t.getX()*i,this.y*=t.getY()*i,this},divideBy:function(t){return this.x/=t.getX(),this.y/=t.getY(),this},divideScaledVectorBy:function(t,i){return this.x/=t.getX()*i,this.y/=t.getY()*i,this},maxTo:function(t){return this.x=Math.max(this.x,t.getX()),this.y=Math.max(this.y,t.getY()),this},minTo:function(t){return this.x=Math.min(this.x,t.getX()),this.y=Math.min(this.y,t.getY()),this},maxScalarTo:function(t){this.x=Math.max(this.x,t),this.y=Math.max(this.y,t)},minScalarTo:function(t){return this.x=Math.min(this.x,t),this.y=Math.min(this.y,t),this},halveBy:function(){return this.x*=.5,this.y*=.5,this},normalizeTo:function(){var t=this.getMagnitude();return t&&this.scaleBy(1/t),this},absoluteTo:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},oppositeTo:function(){return this.x=-this.x,this.y=-this.y,this},oppositeXTo:function(){return this.x=-this.x,this},oppositeYTo:function(){return this.y=-this.y,this},clampTo:function(t){return this.x=TYPE6.MathUtils.clamp(this.x,t.topLeftCorner.getX(),t.bottomRightCorner.getX()),this.y=TYPE6.MathUtils.clamp(this.y,t.topLeftCorner.getY(),t.bottomRightCorner.getY()),this},lerpTo:function(t,i,e){return this.x=TYPE6.MathUtils.lerp(t,i.getX(),e.getX()),this.y=TYPE6.MathUtils.lerp(t,i.getY(),e.getY()),this},dotProduct:function(t){return this.x*t.getX()+this.y*t.getY()},isOrigin:function(){return 0===this.x&&0===this.y},isPositive:function(){return this.getX()>0&&this.getY()>0},isNegative:function(){return this.getX()<0&&this.getY()<0},isNotOrigin:function(){return!(!this.x&&!this.y)},valueValidation:function(t){return isNaN(t)?0:t}},TYPE6.Vector3={x:0,y:0,z:0,create:function(t,i,e){var n=Object.create(this);return n.setX(t),n.setY(i),n.setZ(e),n},toArray:function(){return[this.x,this.y,this.z]},toString:function(){return"("+this.x+";"+this.y+";"+this.z+")"},copy:function(){return this.create(this.getX(),this.getY(),this.getZ())},copyTo:function(t){this.x=t.getX(),this.y=t.getY(),this.z=t.getZ()},setX:function(t){return this.x=this.valueValidation(t),this.x},getX:function(){return this.x},setY:function(t){return this.y=this.valueValidation(t),this.y},getY:function(){return this.y},setZ:function(t){return this.z=this.valueValidation(t),this.z},getZ:function(){return this.z},subtract:function(t){return this.create(this.x-t.getX(),this.y-t.getY(),this.z-t.getZ())},scale:function(t){return this.create(this.x*t,this.y*t,this.z*t)},getMagnitude:function(){return Math.sqrt(this.getSquaredMagnitude())},getSquaredMagnitude:function(){return this.x*this.x+this.y*this.y+this.z*this.z},normalize:function(){var t=this.getMagnitude();return t?this.scale(1/t):this.create(this.x,this.y,this.z)},dot:function(t){return this.x*t.getX()+this.y*t.getY()+this.z*t.getZ()},cross:function(t){return this.create(this.y*t.getZ()-this.z*t.getY(),this.z*t.getX()-this.x*t.getZ(),this.x*t.getY()-this.y*t.getX())},valueValidation:function(t){return isNaN(t)?0:t}},TYPE6.Geometry={},TYPE6.Geometry.Circle={position:{},radius:0,diameter:0,shape:"circle",size:{},halfSize:{},create:function(t,i,e){var n=Object.create(this);return n.init(),n.setRadius(e),n.setPositionXY(t,i),n},init:function(){this.position=TYPE6.Vector2D.create(),this.radius=0,this.diameter=0,this.initSize()},initSize:function(){this.size=TYPE6.Vector2D.create(),this.halfSize=TYPE6.Vector2D.create()},setSize:function(){this.size.setXY(this.diameter,this.diameter),this.halfSize.setXY(this.radius,this.radius)},copy:function(t){return this.create(t.getPositionX(),t.getPositionY(),t.getRadius())},copyTo:function(t){this.setPositionFromVector2D(t.getPosition()),this.setRadius(t.getRadius())},setPositionX:function(t){return this.position.setX(t),this.position.getX()},setPositionY:function(t){return this.position.setY(t),this.position.getY()},setPositionXY:function(t,i){return this.position.setXY(t,i),this.position},setPositionFromVector2D:function(t){return this.position.copyTo(t),this.position},getPosition:function(){return this.position},getPositionX:function(){return this.position.getX()},getPositionY:function(){return this.position.getY()},setRadius:function(t){return this.radius=t,this.diameter=2*this.radius,this.setSize(),this.radius},getRadius:function(){return this.radius},setDiameter:function(t){return this.diameter=t,this.radius=.5*this.diameter,this.setSize(),this.diameter},getDiameter:function(){return this.diameter},getHalfSize:function(){return this.halfSize},getSize:function(){return this.size},clampTo:function(t){this.position.clampTo(t)},scale:function(t){return this.create(this.position.getX(),this.position.getY(),this.radius*t)},scaleBy:function(t){return this.setRadius(this.radius*t),this.radius},getDistance:function(t){return this.position.getDistance(t)},getSquaredDistance:function(t){return this.position.getSquaredDistance(t)},draw:function(t,i,e,n){t.beginPath(),t.arc(this.getPositionX(),this.getPositionY(),this.getRadius(),0,TYPE6.Trigonometry.TWOPI,!1),i&&(t.fillStyle=i,t.fill()),e&&(t.strokeStyle=e,t.lineWidth=n,t.stroke())}},TYPE6.Geometry.Rectangle={position:{},topLeftCorner:{},bottomRightCorner:{},size:{},halfSize:{},shape:"aabb",create:function(t,i,e,n){var s=Object.create(this);return s.initSize(e,n),s.initPosition(t,i),s},initSize:function(t,i){this.size=TYPE6.Vector2D.create(t,i),this.halfSize=this.size.halve()},initPosition:function(t,i){this.position=TYPE6.Vector2D.create(t,i),this.topLeftCorner=TYPE6.Vector2D.create(t-this.halfSize.getX(),i-this.halfSize.getY()),this.bottomRightCorner=TYPE6.Vector2D.create(t+this.halfSize.getX(),i+this.halfSize.getY())},copy:function(t){return this.create(t.getPositionX(),t.getPositionY(),t.getSizeX(),t.getSizeY())},copyTo:function(t){this.setSizeFromVector2D(t.getSize()),this.setPositionFromVector2D(t.getPosition())},setPositionX:function(t){return this.position.setX(t),this.setTopLeftCornerX(t-this.getHalfSizeX()),this.setBottomRightCornerX(t+this.getHalfSizeX()),this.getPositionX()},setPositionY:function(t){return this.position.setY(t),this.setTopLeftCornerY(t-this.getHalfSizeY()),this.setBottomRightCornerY(t+this.getHalfSizeY()),this.getPositionY()},setPositionXY:function(t,i){return this.position.setXY(t,i),this.setTopLeftCornerXY(t-this.getHalfSizeX(),i-this.getHalfSizeY()),this.setBottomRightCornerXY(t+this.getHalfSizeX(),i+this.getHalfSizeY()),this.getPosition()},setPositionFromVector2D:function(t){return this.position.copyTo(t),this.setTopLeftCornerXY(t.getX()-this.getHalfSizeX(),t.getY()-this.getHalfSizeY()),this.setBottomRightCornerXY(t.getX()+this.getHalfSizeX(),t.getY()+this.getHalfSizeY()),this.position},setTopLeftCornerX:function(t){return this.topLeftCorner.setX(t),this.getTopLeftCornerX()},setTopLeftCornerY:function(t){return this.topLeftCorner.setY(t),this.getTopLeftCornerY()},setTopLeftCornerXY:function(t,i){return this.topLeftCorner.setXY(t,i),this.getTopLeftCorner()},setTopLeftCornerFromVector2D:function(t){return this.topLeftCorner.copyTo(t),this.topLeftCorner},setBottomRightCornerX:function(t){return this.bottomRightCorner.setX(t),this.getBottomRightCornerX()},setBottomRightCornerY:function(t){return this.bottomRightCorner.setY(t),this.getBottomRightCornerY()},setBottomRightCornerXY:function(t,i){return this.bottomRightCorner.setXY(t,i),this.getBottomRightCorner()},setBottomRightCornerFromVector2D:function(t){return this.bottomRightCorner.copyTo(t),this.bottomRightCorner},getPosition:function(){return this.position},getPositionX:function(){return this.position.getX()},getPositionY:function(){return this.position.getY()},getTopLeftCorner:function(){return this.topLeftCorner},getTopLeftCornerX:function(){return this.topLeftCorner.getX()},getTopLeftCornerY:function(){return this.topLeftCorner.getY()},getBottomRightCorner:function(){return this.bottomRightCorner},getBottomRightCornerX:function(){return this.bottomRightCorner.getX()},getBottomRightCornerY:function(){return this.bottomRightCorner.getY()},setSizeXY:function(t,i){return this.size.setXY(t,i),this.size},setSizeFromVector2D:function(t){return this.size.copyTo(t),this.size},getSize:function(){return this.size},getSizeX:function(){return this.size.getX()},getSizeY:function(){return this.size.getY()},getHalfSize:function(){return this.halfSize},getHalfSizeX:function(){return this.halfSize.getX()},getHalfSizeY:function(){return this.halfSize.getY()},draw:function(t,i,e,n){t.beginPath(),t.rect(this.topLeftCorner.getX(),this.topLeftCorner.getY(),this.size.getX(),this.size.getY()),i&&(t.fillStyle=i,t.fill()),e&&(t.strokeStyle=e,t.lineWidth=n,t.stroke())}},TYPE6.Trigonometry={PI:TYPE6.MathUtils.round(Math.PI,2),TWOPI:TYPE6.MathUtils.round(2*Math.PI,2),HALFPI:TYPE6.MathUtils.round(.5*Math.PI,2),sineDecimals:2,cosineDecimals:2,arctanDecimals:2,factorialArray:[],sineLoops:{0:9,1:11,2:13,3:15,4:17,5:18,6:19,7:21,8:23},cosineLoops:{0:6,1:8,2:10,3:12,4:14,5:16,6:18,7:20,8:22},arctanLoops:{0:17,1:19,2:21,3:23,4:25,5:27,6:29,7:31,8:33},setSinePrecision:function(t){return this.sineLoops.hasOwnProperty(property)?(this.sineDecimals=t,t):(this.sineDecimals=2,2)},setCosinePrecision:function(t){return this.cosineLoops.hasOwnProperty(property)?(this.cosineDecimals=t,t):(this.cosineDecimals=2,2)},degreeToRadian:function(t){return t*this.PI/180},radianToDegree:function(t){return 180*t/this.PI},sine:function(t){return t=this.normalizeRadian(t),this.sineDecimals<=2&&t<.28&&t>-.28?t:this.taylorSerie(3,this.sineLoops[this.sineDecimals],t,t,!0)},cosine:function(t){var i=(t=this.normalizeRadian(t))*t;return this.cosineDecimals<=2&&t<=.5&&t>=-.5?1-.5*i:this.taylorSerie(2,this.cosineLoops[this.cosineDecimals],1,t,!0)},arctan2:function(t,i){var e=i/t;return t>0?this.arctan(e):t<0?i<0?this.arctan(e)-this.PI:this.arctan(e)+this.PI:i<0?-this.HALFPI:i>0&&this.HALFPI},arctan2fromVector2D:function(t){return this.arctan2(t.getX(),t.getY())},arctan:function(t){var i=this.arctanLoops[this.arctanDecimals];return t<1&&t>-1?this.taylorSerie(3,i,t,t,!1):t>=1?(t=1/t,-(this.taylorSerie(3,i,t,t,!1)-this.HALFPI)):(t=-1/t,this.taylorSerie(3,i,t,t,!1)-this.HALFPI)},sineEquation:function(t,i,e,n){return t*this.sine(i+e)+n},cosineEquation:function(t,i,e,n){return t*this.cosine(i+e)+n},arctanEquation:function(t,i,e,n){return t*this.arctan(i+e)+n},taylorSerie:function(t,i,e,n,s){for(var r=n*n,o=e,h=-1,a=0;t<=i;t+=2,a++)o+=(e*=r)/(s?this.factorialArray[t]:t)*h,h=TYPE6.MathUtils.getOppositeSign(h);return o},createFactorialArray:function(){for(var t=1,i=1;t<=Math.max(3*this.sineLoops[8],2*this.cosineLoops[8]);t++)i*=this.factorial(t),this.factorialArray.push(i)},factorial:function(t){return t>1?t-1:1},normalizeRadian:function(t){return t>this.PI||t<-this.PI?t-this.TWOPI*Math.floor((t+this.PI)/this.TWOPI):t}},TYPE6.Trigonometry.createFactorialArray(),TYPE6.Matrix4x3={m:new Float32Array(16),create:function(t,i,e,n,s,r,o,h,a,u,c,g){var f=Object.create(this);return f.m=new Float32Array(16),f.make(t,i,e,n,s,r,o,h,a,u,c,g),f},createFromArray:function(t){var i=Object.create(this);return i.m=new Float32Array(16),i.make(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]),i},copy:function(t){var i=t.toArray();this.make(i[0],i[1],i[2],i[4],i[5],i[6],i[8],i[9],i[10],i[12],i[13],i[14])},make:function(t,i,e,n,s,r,o,h,a,u,c,g){this.m[0]=this.valueValidation(t),this.m[1]=this.valueValidation(i),this.m[2]=this.valueValidation(e),this.m[3]=0,this.m[4]=this.valueValidation(n),this.m[5]=this.valueValidation(s),this.m[6]=this.valueValidation(r),this.m[7]=0,this.m[8]=this.valueValidation(o),this.m[9]=this.valueValidation(h),this.m[10]=this.valueValidation(a),this.m[11]=0,this.m[12]=this.valueValidation(u),this.m[13]=this.valueValidation(c),this.m[14]=this.valueValidation(g),this.m[15]=1},toArray:function(){return this.m},toString:function(){return"("+this.m[0]+","+this.m[1]+","+this.m[2]+","+this.m[3]+";"+this.m[4]+","+this.m[5]+","+this.m[6]+","+this.m[7]+";"+this.m[8]+","+this.m[9]+","+this.m[10]+","+this.m[11]+";"+this.m[12]+","+this.m[13]+","+this.m[14]+","+this.m[15]+")"},identity:function(){this.make(1,0,0,0,1,0,0,0,1,0,0,0)},rotateXBy:function(t){var i=TYPE6.Trigonometry.cosine(t),e=TYPE6.Trigonometry.sine(t);this.make(1,0,0,0,i,e,0,-e,i,0,0,0)},rotateYBy:function(t){var i=TYPE6.Trigonometry.cosine(t),e=TYPE6.Trigonometry.sine(t);this.make(i,0,-e,0,1,0,e,0,i,0,0,0)},rotateZBy:function(t){var i=TYPE6.Trigonometry.cosine(t),e=TYPE6.Trigonometry.sine(t);this.make(i,e,0,-e,i,0,0,0,1,0,0,0)},translateTo:function(t){this.make(1,0,0,0,0,1,0,0,0,0,1,0,t.getX(),t.getY(),t.getZ(),1)},multiplyBy:function(t){var i=this.toArray(),e=t.toArray();this.make(i[0]*e[0]+i[4]*e[1]+i[8]*e[2],i[1]*e[0]+i[5]*e[1]+i[9]*e[2],i[2]*e[0]+i[6]*e[1]+i[10]*e[2],i[0]*e[4]+i[4]*e[5]+i[8]*e[6],i[1]*e[4]+i[5]*e[5]+i[9]*e[6],i[2]*e[4]+i[6]*e[5]+i[10]*e[6],i[0]*e[8]+i[4]*e[9]+i[8]*e[10],i[1]*e[8]+i[5]*e[9]+i[9]*e[10],i[2]*e[8]+i[6]*e[9]+i[10]*e[10],i[0]*e[12]+i[4]*e[13]+i[8]*e[14]+i[12],i[1]*e[12]+i[5]*e[13]+i[9]*e[14]+i[13],i[2]*e[12]+i[6]*e[13]+i[10]*e[14]+i[14])},lookAtRH:function(t,i,e){var n=t.subtract(i).normalize(),s=e.cross(n).normalize(),r=n.cross(s);this.make(s.getX(),r.getX(),n.getX(),s.getY(),r.getY(),n.getY(),s.getZ(),r.getZ(),n.getZ(),-s.dot(t),-r.dot(t),-n.dot(t))},valueValidation:function(t){return isNaN(t)?0:t}},TYPE6.Matrix4x4={m:new Float32Array(16),create:function(t,i,e,n,s,r,o,h,a,u,c,g,f,m,l,Y){var y=Object.create(this);return y.m=new Float32Array(16),y.make(t,i,e,n,s,r,o,h,a,u,c,g,f,m,l,Y),y},createFromArray:function(t){var i=Object.create(this);return i.m=new Float32Array(16),i.make(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),i},make:function(t,i,e,n,s,r,o,h,a,u,c,g,f,m,l,Y){this.m[0]=this.valueValidation(t),this.m[1]=this.valueValidation(i),this.m[2]=this.valueValidation(e),this.m[3]=this.valueValidation(n),this.m[4]=this.valueValidation(s),this.m[5]=this.valueValidation(r),this.m[6]=this.valueValidation(o),this.m[7]=this.valueValidation(h),this.m[8]=this.valueValidation(a),this.m[9]=this.valueValidation(u),this.m[10]=this.valueValidation(c),this.m[11]=this.valueValidation(g),this.m[12]=this.valueValidation(f),this.m[13]=this.valueValidation(m),this.m[14]=this.valueValidation(l),this.m[15]=this.valueValidation(Y)},toArray:function(){return this.m},toString:function(){return"("+this.m[0]+","+this.m[1]+","+this.m[2]+","+this.m[3]+";"+this.m[4]+","+this.m[5]+","+this.m[6]+","+this.m[7]+";"+this.m[8]+","+this.m[9]+","+this.m[10]+","+this.m[11]+";"+this.m[12]+","+this.m[13]+","+this.m[14]+","+this.m[15]+")"},identity:function(){this.make(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},multiplyBy:function(t){this.make(this.m[0]*t.m[0]+this.m[4]*t.m[1]+this.m[8]*t.m[2],this.m[1]*t.m[0]+this.m[5]*t.m[1]+this.m[9]*t.m[2],this.m[2]*t.m[0]+this.m[6]*t.m[1]+this.m[10]*t.m[2],0,this.m[0]*t.m[4]+this.m[4]*t.m[5]+this.m[8]*t.m[6],this.m[1]*t.m[4]+this.m[5]*t.m[5]+this.m[9]*t.m[6],this.m[2]*t.m[4]+this.m[6]*t.m[5]+this.m[10]*t.m[6],0,this.m[0]*t.m[8]+this.m[4]*t.m[9]+this.m[8]*t.m[10],this.m[1]*t.m[8]+this.m[5]*t.m[9]+this.m[9]*t.m[10],this.m[2]*t.m[8]+this.m[6]*t.m[9]+this.m[10]*t.m[10],0,this.m[0]*t.m[12]+this.m[4]*t.m[13]+this.m[8]*t.m[14]+this.m[12],this.m[1]*t.m[12]+this.m[5]*t.m[13]+this.m[9]*t.m[14]+this.m[13],this.m[2]*t.m[12]+this.m[6]*t.m[13]+this.m[10]*t.m[14]+this.m[14],1)},perspective:function(t,i,e,n){var s=Math.tan(.5*Math.PI-.5*t*Math.PI/180),r=1/(e-n);this.make(s/i,0,0,0,0,s,0,0,0,0,(e+n)*r,-1,0,0,e*n*r*2,0)},orthographic:function(t,i,e,n,s,r){var o=i-t,h=e-n,a=r-s,u=(i+t)/o,c=(e+n)/h,g=(r+s)/a;this.make(2/o,0,0,0,0,2/h,0,0,0,0,-2/a,0,-u,-c,-g,1)},valueValidation:function(t){return isNaN(t)?0:t}};