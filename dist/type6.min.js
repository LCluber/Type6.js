/** MIT License
* 
* Copyright (c) 2011 Ludovic CLUBER 
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*
* http://type6js.lcluber.com
*/
var TYPE6={Revision:"0.3.0"};TYPE6.MathUtils={round:function(a,b){return b=Math.pow(10,b),Math.round(a*b)/b},floor:function(a,b){return b=Math.pow(10,b),Math.floor(a*b)/b},ceil:function(a,b){return b=Math.pow(10,b),Math.ceil(a*b)/b},trunc:function(a,b){return b=Math.pow(10,b),Math.trunc(a*b)/b},roundToNearest:function(a,b){return Math.round(a/b)*b},isEven:function(a){return!(1&a)},isOdd:function(a){return 1&a},mix:function(a,b,c){return(1-c)*a+c*b},getSign:function(a){return a?a<0?-1:1:0},getOppositeSign:function(a){return-a},clamp:function(a,b,c){return Math.min(Math.max(a,b),c)},normalize:function(a,b,c){return(a-b)/(c-b)},lerp:function(a,b,c){return(c-b)*a+b},map:function(a,b,c,d,e){return this.lerp(this.normalize(a,b,c),d,e)}},TYPE6.Random={float:function(a,b){return a+Math.random()*(b-a)},integer:function(a,b){return Math.floor(a+Math.random()*(b-a+1))},distribution:function(a,b,c){for(var d=0,e=0;e<c;e++)d+=this.float(a,b);return d/c},pick:function(a,b){return Math.random()<.5?a:b}},TYPE6.Bezier={quadratic:function(a,b,c,d,e,f,g,h){return g*a+h*b+e*c},cubic:function(a,b,c,d,e,f,g){return Math.pow(g,3)*a+3*Math.pow(g,2)*e*b+3*g*f*c+f*e*d}},TYPE6.Vector2D={x:0,y:0,create:function(a,b){var c=Object.create(this);return c.setX(a),c.setY(b),c},createFromArray:function(a){var b=Object.create(this);return b.setX(a[0]),b.setY(a[1]),b},toArray:function(){return[this.x,this.y]},toString:function(){return"("+this.x+";"+this.y+")"},setX:function(a){return this.x=this.valueValidation(a),this.x},getX:function(){return this.x},setY:function(a){return this.y=this.valueValidation(a),this.y},getY:function(){return this.y},set:function(a,b){return!!this.hasOwnProperty(a)&&(this[a]=this.valueValidation(b),this[a])},get:function(a){return!!this.hasOwnProperty(a)&&this[a]},setXY:function(a,b){this.x=this.valueValidation(a),this.y=this.valueValidation(b)},setToOrigin:function(){this.x=0,this.y=0},setXToOrigin:function(){this.x=0},setYToOrigin:function(){this.y=0},setAngle:function(a){if(this.valueValidation(a)){var b=this.getMagnitude();return this.x=TYPE6.Trigonometry.cosinus(a)*b,this.y=TYPE6.Trigonometry.sinus(a)*b,!0}return!1},getAngle:function(){return Math.atan2(this.y,this.x)},setMagnitude:function(a){if(this.valueValidation(a)){var b=this.getAngle();return this.x=TYPE6.Trigonometry.cosinus(b)*a,this.y=TYPE6.Trigonometry.sinus(b)*a,!0}return!1},getMagnitude:function(){return Math.sqrt(this.getSquaredMagnitude())},getSquaredMagnitude:function(){return this.x*this.x+this.y*this.y},getDistance:function(a){this.subtractFrom(a);var b=this.getMagnitude();return this.addTo(a),b},getSquaredDistance:function(a){this.subtractFrom(a);var b=this.getSquaredMagnitude();return this.addTo(a),b},copy:function(){return this.create(this.getX(),this.getY())},add:function(a){return this.create(this.x+a.getX(),this.y+a.getY())},addX:function(a){return this.create(this.x+a,this.y)},addY:function(a){return this.create(this.x,this.y+a)},addScalar:function(a){return this.create(this.x+a,this.y+a)},addScaledVector:function(a,b){return this.create(this.x+a.getX()*b,this.y+a.getY()*b)},subtract:function(a){return this.create(this.x-a.getX(),this.y-a.getY())},subtractScalar:function(a){return this.create(this.x-a,this.y-a)},subtractScaledVector:function(a,b){return this.create(this.x-a.getX()*b,this.y-a.getY()*b)},scale:function(a){return this.create(this.x*a,this.y*a)},multiply:function(a){return this.create(this.x*a.getX(),this.y*a.getY())},divide:function(a){return this.create(this.x/a.getX(),this.y/a.getY())},halve:function(){return this.create(.5*this.x,.5*this.y)},normalize:function(){var a=this.getMagnitude();if(a)return this.scale(1/a)},absolute:function(){return this.create(Math.abs(this.x),Math.abs(this.y))},opposite:function(){return this.create(-this.x,-this.y)},oppositeX:function(){return this.create(-this.x,this.y)},oppositeY:function(){return this.create(this.x,-this.y)},clamp:function(a){return this.create(TYPE6.MathUtils.clamp(this.x,a.topLeftCorner.getX(),a.bottomRightCorner.getX()),TYPE6.MathUtils.clamp(this.y,a.topLeftCorner.getY(),a.bottomRightCorner.getY()))},lerp:function(a,b,c){return this.create(TYPE6.MathUtils.lerp(a,b.getX(),c.getX()),TYPE6.MathUtils.lerp(a,b.getY(),c.getY()))},quadraticBezier:function(a,b,c,d){var e=d*d,f=1-d,g=Math.pow(f,2),h=2*f*d;return this.create(TYPE6.Bezier.quadratic(a.getX(),b.getX(),c.getX(),d,e,f,g,h),TYPE6.Bezier.quadratic(a.getY(),b.getY(),c.getY(),d,e,f,g,h))},cubicBezier:function(a,b,c,d,e){var f=e*e,g=1-e;return this.create(TYPE6.Bezier.cubic(a.getX(),b.getX(),c.getX(),d.getX(),e,f,g),TYPE6.Bezier.cubic(a.getY(),b.getY(),c.getY(),d.getY(),e,f,g))},quadraticBezierTo:function(a,b,c,d){var e=d*d,f=1-d,g=Math.pow(f,2),h=2*f*d;this.x=TYPE6.Bezier.quadratic(a.getX(),b.getX(),c.getX(),d,e,f,g,h),this.y=TYPE6.Bezier.quadratic(a.getY(),b.getY(),c.getY(),d,e,f,g,h)},cubicBezierTo:function(a,b,c,d,e){var f=e*e,g=1-e;this.x=TYPE6.Bezier.cubic(a.getX(),b.getX(),c.getX(),d.getX(),e,f,g),this.y=TYPE6.Bezier.cubic(a.getY(),b.getY(),c.getY(),d.getY(),e,f,g)},copyTo:function(a){this.x=a.getX(),this.y=a.getY()},addTo:function(a){this.x+=a.getX(),this.y+=a.getY()},addToX:function(a){this.x+=a},addToY:function(a){this.y+=a},addScalarTo:function(a){this.x+=a,this.y+=a},addScaledVectorTo:function(a,b){this.x+=a.getX()*b,this.y+=a.getY()*b},copyScaledVectorTo:function(a,b){this.x=a.getX()*b,this.y=a.getY()*b},subtractFrom:function(a){this.x-=a.getX(),this.y-=a.getY()},subtractFromX:function(a){this.x-=a},subtractFromY:function(a){this.y-=a},copySubtractFromTo:function(a,b){this.x=a.getX()-b.getX(),this.y=a.getY()-b.getY()},subtractScalarFrom:function(a){this.x-=a,this.y-=a},subtractScaledVectorFrom:function(a,b){this.x-=a.getX()*b,this.y-=a.getY()*b},scaleBy:function(a){this.x*=a,this.y*=a},multiplyBy:function(a){this.x*=a.getX(),this.y*=a.getY()},multiplyScaledVectorBy:function(a,b){this.x*=a.getX()*b,this.y*=a.getY()*b},divideBy:function(a){this.x/=a.getX(),this.y/=a.getY()},divideScaledVectorBy:function(a,b){this.x/=a.getX()*b,this.y/=a.getY()*b},maxTo:function(a){this.x=Math.max(this.x,a.getX()),this.y=Math.max(this.y,a.getY())},minTo:function(a){this.x=Math.min(this.x,a.getX()),this.y=Math.min(this.y,a.getY())},maxScalarTo:function(a){this.x=Math.max(this.x,a),this.y=Math.max(this.y,a)},minScalarTo:function(a){this.x=Math.min(this.x,a),this.y=Math.min(this.y,a)},halveBy:function(){this.x*=.5,this.y*=.5},normalizeTo:function(){var a=this.getMagnitude();a&&this.scaleBy(1/a)},absoluteTo:function(){this.x=Math.abs(this.x),this.y=Math.abs(this.y)},oppositeTo:function(){this.x=-this.x,this.y=-this.y},oppositeXTo:function(){this.x=-this.x},oppositeYTo:function(){this.y=-this.y},clampTo:function(a){this.x=TYPE6.MathUtils.clamp(this.x,a.topLeftCorner.getX(),a.bottomRightCorner.getX()),this.y=TYPE6.MathUtils.clamp(this.y,a.topLeftCorner.getY(),a.bottomRightCorner.getY())},lerpTo:function(a,b,c){this.x=TYPE6.MathUtils.lerp(a,b.getX(),c.getX()),this.y=TYPE6.MathUtils.lerp(a,b.getY(),c.getY())},dotProduct:function(a){return this.x*a.getX()+this.y*a.getY()},isOrigin:function(){return 0===this.x||0===this.y},isPositive:function(){return this.getX()>0&&this.getY()>0},isNegative:function(){return this.getX()<0&&this.getY()<0},isNotOrigin:function(){return!(!this.x&&!this.y)},valueValidation:function(a){return isNaN(a)?0:a}},TYPE6.Vector3={x:0,y:0,z:0,create:function(a,b,c){var d=Object.create(this);return d.setX(a),d.setY(b),d.setZ(c),d},toArray:function(){return[this.x,this.y,this.z]},toString:function(){return"("+this.x+";"+this.y+";"+this.z+")"},setX:function(a){return this.x=this.valueValidation(a),this.x},getX:function(){return this.x},setY:function(a){return this.y=this.valueValidation(a),this.y},getY:function(){return this.y},setZ:function(a){return this.z=this.valueValidation(a),this.z},getZ:function(){return this.z},subtract:function(a){return this.create(this.x-a.getX(),this.y-a.getY(),this.z-a.getZ())},scale:function(a){return this.create(this.x*a,this.y*a,this.z*a)},getMagnitude:function(){return Math.sqrt(this.getSquaredMagnitude())},getSquaredMagnitude:function(){return this.x*this.x+this.y*this.y+this.z*this.z},normalize:function(){var a=this.getMagnitude();return a?this.scale(1/a):this.create(this.x,this.y,this.z)},dot:function(a){return this.x*a.getX()+this.y*a.getY()+this.z*a.getZ()},cross:function(a){return this.create(this.y*a.getZ()-this.z*a.getY(),this.z*a.getX()-this.x*a.getZ(),this.x*a.getY()-this.y*a.getX())},valueValidation:function(a){return isNaN(a)?0:a}},TYPE6.Geometry={},TYPE6.Geometry.Circle={position:{},radius:0,diameter:0,shape:"circle",size:{},halfSize:{},create:function(a,b,c){var d=Object.create(this);return d.init(),d.setRadius(c),d.setPositionXY(a,b),d},init:function(){this.position=TYPE6.Vector2D.create(),this.radius=0,this.diameter=0,this.initSize()},initSize:function(){this.size=TYPE6.Vector2D.create(),this.halfSize=TYPE6.Vector2D.create()},setSize:function(){this.size.setXY(this.diameter,this.diameter),this.halfSize.setXY(this.radius,this.radius)},copy:function(a){return this.create(a.getPositionX(),a.getPositionY(),a.getRadius())},copyTo:function(a){this.setPositionFromVector2D(a.getPosition()),this.setRadius(a.getRadius())},setPositionX:function(a){return this.position.setX(a),this.position.getX()},setPositionY:function(a){return this.position.setY(a),this.position.getY()},setPositionXY:function(a,b){return this.position.setXY(a,b),this.position},setPositionFromVector2D:function(a){return this.position.copyTo(a),this.position},getPosition:function(){return this.position},getPositionX:function(){return this.position.getX()},getPositionY:function(){return this.position.getY()},setRadius:function(a){return this.radius=a,this.diameter=2*this.radius,this.setSize(),this.radius},getRadius:function(){return this.radius},setDiameter:function(a){return this.diameter=a,this.radius=.5*this.diameter,this.setSize(),this.diameter},getDiameter:function(){return this.diameter},getHalfSize:function(){return this.halfSize},getSize:function(){return this.size},clampTo:function(a){this.position.clampTo(a)},scale:function(a){return this.create(this.position.getX(),this.position.getY(),this.radius*a)},scaleBy:function(a){return this.setRadius(this.radius*a),this.radius},getDistance:function(a){return this.position.getDistance(a)},getSquaredDistance:function(a){return this.position.getSquaredDistance(a)},draw:function(a,b,c,d){a.beginPath(),a.arc(this.getPositionX(),this.getPositionY(),this.getRadius(),0,TYPE6.Trigonometry.TWOPI,!1),b&&(a.fillStyle=b,a.fill()),c&&(a.strokeStyle=c,a.lineWidth=d,a.stroke())}},TYPE6.Geometry.Rectangle={position:{},topLeftCorner:{},bottomRightCorner:{},size:{},halfSize:{},shape:"aabb",create:function(a,b,c,d){var e=Object.create(this);return e.initSize(c,d),e.initPosition(a,b),e},initSize:function(a,b){this.size=TYPE6.Vector2D.create(a,b),this.halfSize=this.size.halve()},initPosition:function(a,b){this.position=TYPE6.Vector2D.create(a,b),this.topLeftCorner=TYPE6.Vector2D.create(a-this.halfSize.getX(),b-this.halfSize.getY()),this.bottomRightCorner=TYPE6.Vector2D.create(a+this.halfSize.getX(),b+this.halfSize.getY())},copy:function(a){return this.create(a.getPositionX(),a.getPositionY(),a.getSizeX(),a.getSizeY())},copyTo:function(a){this.setSizeFromVector2D(a.getSize()),this.setPositionFromVector2D(a.getPosition())},setPositionX:function(a){return this.position.setX(a),this.setTopLeftCornerX(a-this.getHalfSizeX()),this.setBottomRightCornerX(a+this.getHalfSizeX()),this.getPositionX()},setPositionY:function(a){return this.position.setY(a),this.setTopLeftCornerY(a-this.getHalfSizeY()),this.setBottomRightCornerY(a+this.getHalfSizeY()),this.getPositionY()},setPositionXY:function(a,b){return this.position.setXY(a,b),this.setTopLeftCornerXY(a-this.getHalfSizeX(),b-this.getHalfSizeY()),this.setBottomRightCornerXY(a+this.getHalfSizeX(),b+this.getHalfSizeY()),this.getPosition()},setPositionFromVector2D:function(a){return this.position.copyTo(a),this.setTopLeftCornerXY(a.getX()-this.getHalfSizeX(),a.getY()-this.getHalfSizeY()),this.setBottomRightCornerXY(a.getX()+this.getHalfSizeX(),a.getY()+this.getHalfSizeY()),this.position},setTopLeftCornerX:function(a){return this.topLeftCorner.setX(a),this.getTopLeftCornerX()},setTopLeftCornerY:function(a){return this.topLeftCorner.setY(a),this.getTopLeftCornerY()},setTopLeftCornerXY:function(a,b){return this.topLeftCorner.setXY(a,b),this.getTopLeftCorner()},setTopLeftCornerFromVector2D:function(a){return this.topLeftCorner.copyTo(a),this.topLeftCorner},setBottomRightCornerX:function(a){return this.bottomRightCorner.setX(a),this.getBottomRightCornerX()},setBottomRightCornerY:function(a){return this.bottomRightCorner.setY(a),this.getBottomRightCornerY()},setBottomRightCornerXY:function(a,b){return this.bottomRightCorner.setXY(a,b),this.getBottomRightCorner()},setBottomRightCornerFromVector2D:function(a){return this.bottomRightCorner.copyTo(a),this.bottomRightCorner},getPosition:function(){return this.position},getPositionX:function(){return this.position.getX()},getPositionY:function(){return this.position.getY()},getTopLeftCorner:function(){return this.topLeftCorner},getTopLeftCornerX:function(){return this.topLeftCorner.getX()},getTopLeftCornerY:function(){return this.topLeftCorner.getY()},getBottomRightCorner:function(){return this.bottomRightCorner},getBottomRightCornerX:function(){return this.bottomRightCorner.getX()},getBottomRightCornerY:function(){return this.bottomRightCorner.getY()},setSizeXY:function(a,b){return this.size.setXY(a,b),this.size},setSizeFromVector2D:function(a){return this.size.copyTo(a),this.size},getSize:function(){return this.size},getSizeX:function(){return this.size.getX()},getSizeY:function(){return this.size.getY()},getHalfSize:function(){return this.halfSize},getHalfSizeX:function(){return this.halfSize.getX()},getHalfSizeY:function(){return this.halfSize.getY()},draw:function(a,b,c,d){a.beginPath(),a.rect(this.topLeftCorner.getX(),this.topLeftCorner.getY(),this.size.getX(),this.size.getY()),b&&(a.fillStyle=b,a.fill()),c&&(a.strokeStyle=c,a.lineWidth=d,a.stroke())}},TYPE6.Trigonometry={PI:TYPE6.MathUtils.round(Math.PI,2),TWOPI:TYPE6.MathUtils.round(2*Math.PI,2),HALFPI:TYPE6.MathUtils.round(.5*Math.PI,2),sineDecimals:2,cosineDecimals:2,arctanDecimals:2,factorialArray:[],sineLoops:{0:9,1:11,2:13,3:15,4:17,5:18,6:19,7:21,8:23},cosineLoops:{0:6,1:8,2:10,3:12,4:14,5:16,6:18,7:20,8:22},arctanLoops:{0:17,1:19,2:21,3:23,4:25,5:27,6:29,7:31,8:33},setSinePrecision:function(a){return this.sineLoops.hasOwnProperty(property)?(this.sineDecimals=a,a):(this.sineDecimals=2,2)},setCosinePrecision:function(a){return this.cosineLoops.hasOwnProperty(property)?(this.cosineDecimals=a,a):(this.cosineDecimals=2,2)},degreeToRadian:function(a){return a*this.PI/180},radianToDegree:function(a){return 180*a/this.PI},sine:function(a){return a=this.normalizeRadian(a),this.sineDecimals<=2&&a<.28&&a>-.28?a:this.taylorSerie(3,this.sineLoops[this.sineDecimals],a,a,!0)},cosine:function(a){a=this.normalizeRadian(a);var b=a*a;return this.cosineDecimals<=2&&a<=.5&&a>=-.5?1-.5*b:this.taylorSerie(2,this.cosineLoops[this.cosineDecimals],1,a,!0)},arctan2:function(a,b){var c=b/a;return a>0?this.arctan(c):a<0?b<0?this.arctan(c)-this.PI:this.arctan(c)+this.PI:b<0?-this.HALFPI:b>0&&this.HALFPI},arctan2fromVector2D:function(a){return this.arctan2(a.getX(),a.getY())},arctan:function(a){var b=this.arctanLoops[this.arctanDecimals];return a<1&&a>-1?this.taylorSerie(3,b,a,a,!1):a>=1?(a=1/a,-(this.taylorSerie(3,b,a,a,!1)-this.HALFPI)):(a=-1/a,this.taylorSerie(3,b,a,a,!1)-this.HALFPI)},sineEquation:function(a,b,c,d){return a*this.sine(b+c)+d},cosineEquation:function(a,b,c,d){return a*this.cosine(b+c)+d},arctanEquation:function(a,b,c,d){return a*this.arctan(b+c)+d},taylorSerie:function(a,b,c,d,e){for(var f=d*d,g=c,h=0,i=-1,j=0;a<=b;a+=2,j++)c*=f,h=e?this.factorialArray[a]:a,g+=c/h*i,i=TYPE6.MathUtils.getOppositeSign(i);return g},createFactorialArray:function(){for(var a=1,b=1;a<=Math.max(3*this.sineLoops[8],2*this.cosineLoops[8]);a++)b*=this.factorial(a),this.factorialArray.push(b)},factorial:function(a){return a>1?a-1:1},normalizeRadian:function(a){return a>this.PI||a<-this.PI?a-this.TWOPI*Math.floor((a+this.PI)/this.TWOPI):a}},TYPE6.Trigonometry.createFactorialArray(),TYPE6.Matrix4x3={m:new Float32Array(16),create:function(a,b,c,d,e,f,g,h,i,j,k,l){var m=Object.create(this);return m.make(a,b,c,d,e,f,g,h,i,j,k,l),m},createFromArray:function(a){var b=Object.create(this);return b.make(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11]),b},createIdentity:function(){var a=Object.create(this);return a.identity(),a},make:function(a,b,c,d,e,f,g,h,i,j,k,l){this.m[0]=this.valueValidation(a),this.m[1]=this.valueValidation(b),this.m[2]=this.valueValidation(c),this.m[3]=0,this.m[4]=this.valueValidation(d),this.m[5]=this.valueValidation(e),this.m[6]=this.valueValidation(f),this.m[7]=0,this.m[8]=this.valueValidation(g),this.m[9]=this.valueValidation(h),this.m[10]=this.valueValidation(i),this.m[11]=0,this.m[12]=this.valueValidation(j),this.m[13]=this.valueValidation(k),this.m[14]=this.valueValidation(l),this.m[15]=1},toArray:function(){return this.m},toString:function(){return"("+this.m[0]+","+this.m[1]+","+this.m[2]+","+this.m[3]+";"+this.m[4]+","+this.m[5]+","+this.m[6]+","+this.m[7]+";"+this.m[8]+","+this.m[9]+","+this.m[10]+","+this.m[11]+";"+this.m[12]+","+this.m[13]+","+this.m[14]+","+this.m[15]+")"},identity:function(){this.make(1,0,0,0,1,0,0,0,1,0,0,0)},rotateXBy:function(a){var b=TYPE6.Trigonometry.cosine(a),c=TYPE6.Trigonometry.sine(a);this.make(1,0,0,0,b,c,0,-c,b,0,0,0)},rotateYBy:function(a){var b=TYPE6.Trigonometry.cosine(a),c=TYPE6.Trigonometry.sine(a);this.make(b,0,-c,0,1,0,c,0,b,0,0,0)},rotateZBy:function(a){var b=TYPE6.Trigonometry.cosine(a),c=TYPE6.Trigonometry.sine(a);this.make(b,c,0,-c,b,0,0,0,1,0,0,0)},multiplyBy:function(a){var b=this.toArray(),c=a.toArray();this.make(b[0]*c[0]+b[4]*c[1]+b[8]*c[2],b[1]*c[0]+b[5]*c[1]+b[9]*c[2],b[2]*c[0]+b[6]*c[1]+b[10]*c[2],b[0]*c[4]+b[4]*c[5]+b[8]*c[6],b[1]*c[4]+b[5]*c[5]+b[9]*c[6],b[2]*c[4]+b[6]*c[5]+b[10]*c[6],b[0]*c[8]+b[4]*c[9]+b[8]*c[10],b[1]*c[8]+b[5]*c[9]+b[9]*c[10],b[2]*c[8]+b[6]*c[9]+b[10]*c[10],b[0]*c[12]+b[4]*c[13]+b[8]*c[14]+b[12],b[1]*c[12]+b[5]*c[13]+b[9]*c[14]+b[13],b[2]*c[12]+b[6]*c[13]+b[10]*c[14]+b[14])},lookAtRH:function(a,b,c){var d=a.subtract(b).normalize(),e=c.cross(d).normalize(),f=d.cross(e);this.make(e.getX(),f.getX(),d.getX(),e.getY(),f.getY(),d.getY(),e.getZ(),f.getZ(),d.getZ(),-e.dot(a),-f.dot(a),-d.dot(a))},valueValidation:function(a){return isNaN(a)?0:a}},TYPE6.Matrix4x4={m:new Float32Array(16),create:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=Object.create(this);return q.make(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p),q},createFromArray:function(a){var b=Object.create(this);return b.make(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]),b},createIdentity:function(){var a=Object.create(this);return a.identity(),a},make:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.m[0]=this.valueValidation(a),this.m[1]=this.valueValidation(b),this.m[2]=this.valueValidation(c),this.m[3]=this.valueValidation(d),this.m[4]=this.valueValidation(e),this.m[5]=this.valueValidation(f),this.m[6]=this.valueValidation(g),this.m[7]=this.valueValidation(h),this.m[8]=this.valueValidation(i),this.m[9]=this.valueValidation(j),this.m[10]=this.valueValidation(k),this.m[11]=this.valueValidation(l),this.m[12]=this.valueValidation(m),this.m[13]=this.valueValidation(n),this.m[14]=this.valueValidation(o),this.m[15]=this.valueValidation(p)},toArray:function(){return this.m},toString:function(){return"("+this.m[0]+","+this.m[1]+","+this.m[2]+","+this.m[3]+";"+this.m[4]+","+this.m[5]+","+this.m[6]+","+this.m[7]+";"+this.m[8]+","+this.m[9]+","+this.m[10]+","+this.m[11]+";"+this.m[12]+","+this.m[13]+","+this.m[14]+","+this.m[15]+")"},identity:function(){this.make(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},multiplyBy:function(a){this.make(this.m[0]*a.m[0]+this.m[4]*a.m[1]+this.m[8]*a.m[2],this.m[1]*a.m[0]+this.m[5]*a.m[1]+this.m[9]*a.m[2],this.m[2]*a.m[0]+this.m[6]*a.m[1]+this.m[10]*a.m[2],0,this.m[0]*a.m[4]+this.m[4]*a.m[5]+this.m[8]*a.m[6],this.m[1]*a.m[4]+this.m[5]*a.m[5]+this.m[9]*a.m[6],this.m[2]*a.m[4]+this.m[6]*a.m[5]+this.m[10]*a.m[6],0,this.m[0]*a.m[8]+this.m[4]*a.m[9]+this.m[8]*a.m[10],this.m[1]*a.m[8]+this.m[5]*a.m[9]+this.m[9]*a.m[10],this.m[2]*a.m[8]+this.m[6]*a.m[9]+this.m[10]*a.m[10],0,this.m[0]*a.m[12]+this.m[4]*a.m[13]+this.m[8]*a.m[14]+this.m[12],this.m[1]*a.m[12]+this.m[5]*a.m[13]+this.m[9]*a.m[14]+this.m[13],this.m[2]*a.m[12]+this.m[6]*a.m[13]+this.m[10]*a.m[14]+this.m[14],1)},perspective:function(a,b,c,d){var e=Math.tan(.5*Math.PI-.5*a*Math.PI/180),f=1/(c-d);this.make(e/b,0,0,0,0,e,0,0,0,0,(c+d)*f,-1,0,0,c*d*f*2,0)},orthographic:function(a,b,c,d,e,f){var g=b-a,h=c-d,i=f-e,j=(b+a)/g,k=(c+d)/h,l=(f+e)/i;return this.make(2/g,0,0,0,0,2/h,0,0,0,0,-2/i,0,-j,-k,-l,1),this},valueValidation:function(a){return isNaN(a)?0:a}};